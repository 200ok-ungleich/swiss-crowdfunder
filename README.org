* README

[[https://gitlab.com/200ok/crowdfunding/badges/master/pipeline.svg]]

** Setup

*** Install RBenv

macOS: =brew install rbenv=

*** Install Ruby version 2.4.1

macOS: =rbenv install 2.4.1=

*** Install bundler

=gem install bundler=

*** Clone the repository

*** Install dependencies

Within your local checkout run =bundle=.

*** Migrate Database

=rake db:create db:migrate db:seed=

** Start Application

=rails s=


** Run tests

Automatically run tests while development

#+BEGIN_SRC sh
guard
#+END_SRC

For Emacs Users: When using `enh-ruby-mode`, this will also
automatically color your status bar either green on success or red on error.

** Live Reload

Using the Gems =guard-livereload= and =rack-livereload=, development
and saving of =*.erb= files will reload your browser. Developing
=*.scss= files will also hot-load the respective CSS within the
browser.

** Deployment

*** Premise

- You need to have the ssh-agent running, for example under Debian =eval
`ssh-agent -s`=.

- Your ssh identities need to be added to the ssh-agent: =ssh-add=


*** Deploy

We are using =capistrano= to deploy the newest version, roll back,
compile assets and restart the app container.

Deploy the newest version of =master=: =cap production deploy=

Optionally you can locally set a local ENV variable =REVISION= to set
a different branch than =master= for deployment.


*** Delete DB in Production

#+BEGIN_SRC

unicorn_wrapper stop
DISABLE_DATABASE_ENVIRONMENT_CHECK=1 rake db:drop db:create db:migrate db:seed

#+END_SRC

** TODOs

*** PROJECT Ready for Ungleich Crowdfunding
    SCHEDULED: <2017-10-17 Tue> DEADLINE: <2017-10-27 Fri>


**** DONE Remove icons from Goodies
**** TODO NF: Global Lock-Down
     - [ ] Without authorization, no resource can be created
     - [ ] Only new Orders can be created (if valid)
     - [ ] New orders create Users implicitly

**** TODO As a user, when checking out a goodie, I want to give user-info: Name, E-Mail, Age
- [ ] Validation

**** TODO As a user, when checking out a goodie, I want to be able to pay with my bank account
- Gleicher FLow wie jetzt
- Anstelle CC Form: Bank-Einzugs Info
**** TODO Camgains#show/Goodies#index: Show original and remaining quantity
**** TODO Campaign Model: Introduce optional FB and Twitter Links

**** TODO NF: Eval - Users as Nested Attributes through Orders
**** TODO Wenn m√∂glich: Neben Bankeinzug auch CC
**** TODO NF: Capistrano Bug - Migrations run on every deploy
**** DONE NF: Introduce capistrano for deployment by everyone
**** DONE Introduce "About Us" Page without content
**** DONE Introduce "TOS" Page without content

*** PROJECT Production Ready

**** TODO Implement Stripe
**** TODO Implement Bank Transfer
**** TODO i18n all the strings
**** PROJECT Secret Keys

- [ ]  More secret creation of Admin User than through =db/seeds.rb=
- [ ]  More secret devise keys than in =config/devise.rb=
- [ ] Do not expose =SECRET_KEY_BASE= in this README

**** TODO Add CanCanCan and lock down the /whole/ application
**** DONE Reconfigure GA link to the proper URL
